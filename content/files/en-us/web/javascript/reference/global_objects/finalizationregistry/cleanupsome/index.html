---
title: FinalizationRegistry.prototype.cleanupSome()
slug: Web/JavaScript/Reference/Global_Objects/FinalizationRegistry/cleanupSome
summary: >-
  This optional method triggers cleanup callbacks for an implementation-chosen
  number of objects in the FinalizationRegistry that have been reclaimed but
  whose callbacks have not yet been called:
tags:
  - FinalizationRegistry
  - JavaScript
  - Method
  - Prototype
  - Reference
---
<div>{{JSRef}}</div>

<p>This <strong>optional</strong> method triggers cleanup callbacks for an implementation-chosen number of objects in the {{jsxref("FinalizationRegistry")}} that have been reclaimed but whose callbacks have not yet been called:</p>

<pre class="brush: js">registry.cleanupSome?.(heldValue =&gt; {
  // ...
});
</pre>

<p>This method is optional, any given implementation may not have it. It's expected not to be present on web browsers, at least not initially; see <a href="https://github.com/whatwg/html/issues/5446">HTML issue #5446</a> for details. Since the method is optional, you need to check that it's there before calling it. One way to do that is to use <a href="https://github.com/tc39/proposal-optional-chaining">optional chaining</a> (<code>?.</code>) as in the example above.</p>

<p>Normally, you don't call this function. Leave it to the JavaScript engine's garbage collector to do the callbacks as appropriate. This function primarily exists to support long-running code which doesn't yield to the event loop, which is more likely to come up in WebAssembly than ordinary JavaScript code. Also note that the callback may not be called (for instance, if there are no registry entries whose targets have been reclaimed).</p>

<h2 id="Syntax">Syntax</h2>

<pre class="syntaxbox"><code><var>registry</var>.cleanupSome(<var>[callback]</var>);</code>
</pre>

<h3 id="Parameters">Parameters</h3>

<dl>
 <dt><code>callback</code> {{optional_inline}}</dt>
 <dd>Specifies a callback to use just for the callbacks triggered by this call to <code>cleanupSome</code>. If provided, this callback is used instead of the one the <code>FinalizationRegistry</code> was created with.</dd>
</dl>

<h3 id="Return_value">Return value</h3>

<p><code>undefined</code>.</p>

<h3 id="Notes">Notes</h3>

<p>The number of entries for reclaimed objects that are cleaned up from the registry (calling the cleanup callbacks) is implementation-defined. An implementation might remove just one eligible entry, or all eligible entries, or somewhere in between.</p>

<h2 id="Specifications">Specifications</h2>

<table class="standard-table">
 <thead>
  <tr>
   <th scope="col">Specification</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><a href="https://github.com/tc39/proposal-weakrefs">WeakRefs proposal</a></td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility">Browser compatibility</h2>

<div class="hidden">The compatibility table on this page is generated from structured data. If you'd like to contribute to the data, please check out <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> and send us a pull request.</div>

<p>{{Compat("javascript.builtins.FinalizationRegistry.cleanupSome")}}</p>

<h2 id="See_also">See also</h2>

<ul>
 <li>{{jsxref("FinalizationRegistry")}}</li>
</ul>
